<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯æ’ç­/å…¥å­¦å¹´çº§ç²¾å‡†æµ‹è¯„</title>
    <style>
        /* é¡µé¢æ•´ä½“é£æ ¼ */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background-color: #f4f6f8; 
            color: #333; 
            padding: 20px; 
            line-height: 1.5;
        }
        
        /* å¡ç‰‡å®¹å™¨ */
        .container { 
            max-width: 480px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px 25px; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.06); 
        }

        /* æ ‡é¢˜ */
        h2 { 
            text-align: center; 
            color: #1a202c; 
            margin: 0 0 5px 0; 
            font-weight: 700; 
            font-size: 22px; 
        }
        .subtitle { 
            text-align: center; 
            color: #718096; 
            font-size: 13px; 
            margin-bottom: 25px; 
        }

        /* è¡¨å•åŒºåŸŸ */
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #4a5568; }
        .sub-label { font-size: 12px; color: #718096; font-weight: normal; margin-left: 5px; }
        
        input[type="date"], select { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #e2e8f0; 
            border-radius: 8px; 
            font-size: 16px; 
            box-sizing: border-box; 
            background-color: #fff; 
            outline: none;
        }
        input[type="date"]:focus, select:focus { border-color: #3182ce; }

        /* å•é€‰æŒ‰é’®ç»„ (School Type) */
        .radio-group { display: flex; gap: 10px; }
        .radio-option { flex: 1; }
        .radio-option input { display: none; }
        .radio-option label { 
            display: block; 
            padding: 10px 5px; 
            border: 1px solid #e2e8f0; 
            border-radius: 8px; 
            text-align: center; 
            font-size: 13px; 
            cursor: pointer; 
            color: #718096; 
            background: #f8fafc;
            transition: all 0.2s;
        }
        .radio-option input:checked + label {
            background-color: #ebf8ff; 
            border-color: #3182ce; 
            color: #2b6cb0; 
            font-weight: bold;
        }

        /* æµ‹è¯„æŒ‰é’® */
        button { 
            width: 100%; 
            padding: 14px; 
            background-color: #3182ce; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: bold; 
            cursor: pointer; 
            margin-top: 10px; 
            box-shadow: 0 4px 10px rgba(49, 130, 206, 0.2); 
        }
        button:active { transform: scale(0.98); }

        /* ç»“æœå±•ç¤ºåŒº */
        .result-box { 
            margin-top: 25px; 
            padding: 20px; 
            background-color: #ebf8ff; 
            border-radius: 12px; 
            border: 1px solid #bee3f8; 
            display: none; /* é»˜è®¤éšè— */
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .result-header { font-size: 13px; color: #4299e1; text-align: center; margin-bottom: 5px; letter-spacing: 1px; font-weight: bold; }
        .main-grade { font-size: 26px; font-weight: 800; color: #2b6cb0; text-align: center; margin-bottom: 15px; }
        
        .explanation-box {
            font-size: 13px;
            color: #4a5568;
            background: rgba(255,255,255,0.7);
            padding: 10px;
            border-radius: 8px;
            line-height: 1.6;
        }

        /* åº•éƒ¨å¼•æµåŒº (äºŒç»´ç ) */
        .qr-section { 
            margin-top: 25px; 
            padding-top: 20px; 
            border-top: 1px dashed #cbd5e0; 
            text-align: center; 
        }
        
        /* æ ¸å¿ƒä¿®æ”¹ï¼šè®©å›¾ç‰‡å¥½çœ‹çš„æ ·å¼ */
        .qr-img { 
            width: 260px; /* å®½åº¦é€‚ä¸­ */
            height: auto; /* é«˜åº¦è‡ªåŠ¨ï¼Œé˜²æ­¢å‹æ‰ */
            margin-bottom: 15px; 
            border-radius: 8px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); /* åŠ ä¸€ç‚¹é˜´å½±æ›´æœ‰è´¨æ„Ÿ */
        }
        
        .cta-text { font-size: 14px; color: #4a5568; line-height: 1.8; }
        .highlight-brand { color: #2b6cb0; font-weight: bold; font-size: 15px; }
        .highlight-action { color: #e53e3e; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ“ é¦™æ¸¯å…¥å­¦å¹´çº§æµ‹è¯„ Pro</h2>
    <p class="subtitle">ç²¾å‡†åŒ¹é…æœ¬åœ°å­¦åˆ¶ä¸å›½é™…å­¦åˆ¶å·®å¼‚</p>
    
    <div class="form-group">
        <label>å­©å­çš„å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="date" id="dob">
    </div>

    <div class="form-group">
        <label>ç›®æ ‡å…¥å­¦å¹´ä»½ <span class="sub-label">(é€šå¸¸ä¸º9æœˆ)</span></label>
        <select id="targetYear">
            <option value="2025">2025å¹´ 9æœˆ</option>
            <option value="2026" selected>2026å¹´ 9æœˆ</option>
            <option value="2027">2027å¹´ 9æœˆ</option>
            <option value="2028">2028å¹´ 9æœˆ</option>
        </select>
    </div>

    <div class="form-group">
        <label>ç›®æ ‡å­¦æ ¡ç±»å‹</label>
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" name="schoolType" id="typeLocal" value="local" checked>
                <label for="typeLocal">æœ¬åœ°/è‹±åŸº/åŠ æ‹¿å¤§<br><span style="font-size:10px">(æŒ‰å‡ºç”Ÿå¹´ä»½åˆ‡åˆ†)</span></label>
            </div>
            <div class="radio-option">
                <input type="radio" name="schoolType" id="typeUk" value="uk">
                <label for="typeUk">ä¼ ç»Ÿè‹±å¼/å“ˆç½—<br><span style="font-size:10px">(æŒ‰9æœˆ1æ—¥åˆ‡åˆ†)</span></label>
            </div>
        </div>
    </div>

    <button onclick="calculateGrade()">ç”Ÿæˆæµ‹è¯„æŠ¥å‘Š</button>

    <div id="result" class="result-box">
        <div class="result-header">RECOMMENDED GRADE</div>
        <div class="main-grade" id="gradeDisplay"></div>
        <div class="explanation-box" id="explanation"></div>
        
        <div class="qr-section">
            <img src="qrcode.png" alt="æ‰«ç å…³æ³¨" class="qr-img" onerror="this.style.display='none';alert('å›¾ç‰‡æœªæ˜¾ç¤ºï¼Œè¯·ç¡®è®¤GitHubæ–‡ä»¶åä¸ºqrcode.png')">
            
            <div class="cta-text">
                å…³æ³¨å¾®ä¿¡å…¬ä¼—å· <span class="highlight-brand">[å®¶æœ‰æ¸¯å®å…»æˆç¬”è®°]</span><br>
                åŠ  <span class="highlight-action">å¤§D</span> ä¸ºå¥½å‹<br>
                è·å–ã€Šå…¨æ¸¯Top50å›½é™…å­¦æ ¡å¹´é¾„å¯¹ç…§è¡¨ã€‹
            </div>
        </div>
    </div>
</div>

<script>
    function calculateGrade() {
        const dobInput = document.getElementById('dob').value;
        const targetYear = parseInt(document.getElementById('targetYear').value);
        const schoolType = document.querySelector('input[name="schoolType"]:checked').value;
        
        if (!dobInput) { alert("è¯·å…ˆé€‰æ‹©å‡ºç”Ÿæ—¥æœŸ"); return; }
        
        const dob = new Date(dobInput);
        const birthYear = dob.getFullYear();
        const birthMonth = dob.getMonth() + 1; 
        
        let gradeText = "";
        let logicText = "";

        // --- é€»è¾‘åˆ†æ”¯ ---

        if (schoolType === 'local') {
            // é€»è¾‘ Aï¼šè‡ªç„¶å¹´ (1.1 - 12.31)
            // é€‚ç”¨ï¼šæœ¬åœ°(Local), ESF(æ–°), CDNIS, AISHK(1æœˆå…¥å­¦ä½†é€šå¸¸æŒ‰å¹´)
            // æ ¸å¿ƒå…¬å¼ï¼šå…¥å­¦å¹´ - å‡ºç”Ÿå¹´ = æ»¡å‘¨å²
            // 6å²å…¥è¯» P1
            
            let ageInSept = targetYear - birthYear;
            
            if (ageInSept === 2) gradeText = "PN (å­¦å‰ç­)";
            else if (ageInSept === 3) gradeText = "K1 (å¹¼å„¿ç­)";
            else if (ageInSept === 4) gradeText = "K2 (ä½ç­)";
            else if (ageInSept === 5) gradeText = "K3 (é«˜ç­) / ESF Year 1"; 
            else if (ageInSept === 6) gradeText = "P1 (å°ä¸€) / ESF Year 2";
            
            // ä¿®æ­£ï¼šP6 å‡ S1 é€»è¾‘
            // P1(6), P2(7), P3(8), P4(9), P5(10), P6(11)
            else if (ageInSept > 6 && ageInSept <= 11) {
                gradeText = `P${ageInSept - 5} (å°${ageInSept - 5})`;
            }
            // S1(12) ...
            else if (ageInSept > 11 && ageInSept <= 17) {
                gradeText = `S${ageInSept - 11} (ä¸­${ageInSept - 11})`;
            }
            else if (ageInSept > 17) {
                gradeText = "å¤§ä¸“/å¤§å­¦é˜¶æ®µ";
            }
            else {
                gradeText = "å®å®å¤ªå°å•¦ (æœªè¾¾å…¥å­¦å¹´é¾„)";
            }

            logicText = `âœ… <strong>è®¡ç®—è§„åˆ™ï¼š</strong> ä¾æ®ã€è‡ªç„¶å¹´ã€‘ï¼ˆ1æœˆ1æ—¥-12æœˆ31æ—¥ï¼‰åˆ’åˆ†ã€‚<br>ğŸ“Œ <strong>é€‚ç”¨å­¦æ ¡ï¼š</strong> æ‰€æœ‰æœ¬åœ°å®˜æ´¥/ç›´èµ„/ç§ç«‹å­¦æ ¡ã€è‹±åŸº(ESF)ã€åŠ æ‹¿å¤§å›½é™…(CDNIS)ç­‰ã€‚<br>ğŸ’¡ <strong>æç¤ºï¼š</strong> æœ¬åœ°å­¦åˆ¶å®Œæˆ P6 åç›´å‡ S1 (ä¸­ä¸€)ã€‚`;
        } else {
            // é€»è¾‘ Bï¼šä¸¥æ ¼å­¦æœ¯å¹´ (9.1 - 8.31)
            // é€‚ç”¨ï¼šHarrow, Kellett ç­‰ä¼ ç»Ÿè‹±å¼
            // é€»è¾‘ï¼š9æœˆ1æ—¥æ˜¯åˆ†ç•Œçº¿ã€‚9æœˆå‡ºç”Ÿçš„å­©å­ç®—ä¸‹ä¸€å¹´ã€‚
            
            let cohortYear = birthYear;
            if (birthMonth >= 9) cohortYear += 1; 
            
            // è‹±å›½å­¦åˆ¶ï¼š5å²è¯» Year 1
            // è®¡ç®—å…¥å­¦å½“å¹´9æœˆçš„â€œå­¦åˆ¶å¹´é¾„â€
            let ukAge = targetYear - cohortYear;
            
            if (ukAge === 3) gradeText = "Nursery";
            else if (ukAge === 4) gradeText = "Reception";
            else if (ukAge === 5) gradeText = "Year 1";
            else if (ukAge === 6) gradeText = "Year 2";
            else if (ukAge > 6 && ukAge <= 13) {
                 gradeText = `Year ${ukAge - 4}`;
            }
            // Year 10 - Year 13
            else if (ukAge > 13 && ukAge <= 18) {
                 gradeText = `Year ${ukAge - 4} (ä¸­å­¦/é«˜ä¸­)`;
            }
             else if (ukAge > 18) {
                 gradeText = "å¤§å­¦é˜¶æ®µ";
            }
            else {
                 gradeText = "å®å®å¤ªå°å•¦";
            }

            logicText = `âœ… <strong>è®¡ç®—è§„åˆ™ï¼š</strong> ä¾æ®ã€å­¦æœ¯å¹´ã€‘ï¼ˆ9æœˆ1æ—¥-8æœˆ31æ—¥ï¼‰åˆ’åˆ†ã€‚<br>ğŸ“Œ <strong>é€‚ç”¨å­¦æ ¡ï¼š</strong> å“ˆç½—(Harrow)ã€å¯å†(Kellett) ç­‰ä¼ ç»Ÿè‹±å¼ç§æ ¡ã€‚<br>ğŸ’¡ <strong>æ³¨æ„ï¼š</strong> 9æœˆ-12æœˆå‡ºç”Ÿçš„â€œç»†Bâ€é€šå¸¸ä¼šè¯»ä½ä¸€çº§ï¼Œåœ¨ç­çº§é‡Œåšâ€œå¤§å“¥å“¥/å¤§å§å§â€ã€‚`;
        }

        // æ˜¾ç¤ºç»“æœ
        document.getElementById('result').style.display = "block";
        document.getElementById('gradeDisplay').innerText = gradeText;
        document.getElementById('explanation').innerHTML = logicText;
        
        // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œç¡®ä¿çœ‹åˆ°äºŒç»´ç 
        document.getElementById('result').scrollIntoView({behavior: "smooth"});
    }
</script>

</body>
</html>
