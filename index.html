<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯åæ ¡å…¥å­¦çº§æ•°ç²¾å‡†æµ‹è¯„å™¨</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f0f2f5; color: #333; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; background: white; padding: 30px; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); }
        h2 { text-align: center; color: #1a202c; margin-bottom: 5px; font-weight: 700; font-size: 22px; }
        .subtitle { text-align: center; color: #718096; font-size: 14px; margin-bottom: 25px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #4a5568; }
        .sub-label { font-size: 12px; color: #718096; font-weight: 400; margin-left: 5px; }
        
        input, select { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 16px; box-sizing: border-box; background-color: #fff; transition: border-color 0.2s; }
        input:focus, select:focus { border-color: #3182ce; outline: none; }
        
        /* Radio Button Group */
        .radio-group { display: flex; gap: 10px; }
        .radio-option { flex: 1; }
        .radio-option input { display: none; }
        .radio-option label { 
            display: block; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px; 
            text-align: center; font-size: 13px; cursor: pointer; color: #718096; 
        }
        .radio-option input:checked + label {
            background-color: #ebf8ff; border-color: #3182ce; color: #2c5282; font-weight: bold;
        }

        button { width: 100%; padding: 15px; background-color: #3182ce; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 6px rgba(49, 130, 206, 0.2); transition: transform 0.1s; }
        button:active { transform: scale(0.98); }

        .result-box { margin-top: 25px; padding: 20px; background-color: #ebf8ff; border-radius: 10px; border: 1px solid #bee3f8; display: none; }
        .main-grade { font-size: 24px; font-weight: 800; color: #2b6cb0; text-align: center; margin-bottom: 10px; }
        .sub-info { font-size: 14px; color: #4a5568; line-height: 1.6; background: rgba(255,255,255,0.6); padding: 10px; border-radius: 6px; margin-top: 10px;}
        
        .cta-link { display: block; text-align: center; margin-top: 15px; font-size: 13px; color: #718096; text-decoration: none; border-top: 1px dashed #cbd5e0; padding-top: 15px; }
        .highlight { color: #e53e3e; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ« é¦™æ¸¯å­¦æ ¡å…¥å­¦æµ‹è¯„ Pro</h2>
    <p class="subtitle">ç²¾å‡†åŒ¹é…æœ¬åœ°å­¦åˆ¶ä¸è‹±/ç¾å­¦åˆ¶å·®å¼‚</p>
    
    <div class="form-group">
        <label>å­©å­çš„å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="date" id="dob">
    </div>

    <div class="form-group">
        <label>ç›®æ ‡å…¥å­¦å¹´ä»½ <span class="sub-label">(é€šå¸¸ä¸º9æœˆ)</span></label>
        <select id="targetYear">
            <option value="2025">2025å¹´ 9æœˆ</option>
            <option value="2026" selected>2026å¹´ 9æœˆ</option>
            <option value="2027">2027å¹´ 9æœˆ</option>
            <option value="2028">2028å¹´ 9æœˆ</option>
        </select>
    </div>

    <div class="form-group">
        <label>ç›®æ ‡å­¦æ ¡ç±»å‹</label>
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" name="schoolType" id="typeLocal" value="local" checked>
                <label for="typeLocal">æœ¬åœ°/è‹±åŸº/åŠ æ‹¿å¤§<br><span style="font-size:10px">(1æœˆ-12æœˆè®¡ç®—)</span></label>
            </div>
            <div class="radio-option">
                <input type="radio" name="schoolType" id="typeUk" value="uk">
                <label for="typeUk">ä¼ ç»Ÿè‹±å¼/å“ˆç½—<br><span style="font-size:10px">(9æœˆ-8æœˆè®¡ç®—)</span></label>
            </div>
        </div>
    </div>

    <button onclick="calculateGrade()">ç”Ÿæˆæµ‹è¯„æŠ¥å‘Š</button>

    <div id="result" class="result-box">
        <div class="main-grade" id="gradeDisplay"></div>
        <div class="sub-info" id="explanation"></div>
        
        <div class="cta-link">
            éœ€ç¡®è®¤å…·ä½“å­¦æ ¡ï¼ˆå¦‚å“ˆç½—/æ±‰åŸºï¼‰çš„ç‰¹æ®Šè¦æ±‚ï¼Ÿ<br>
            ğŸ‘‰ <a href="#" style="color:#3182ce; font-weight:bold;">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·[å®¶æœ‰æ¸¯å®å…»æˆç¬”è®°]ï¼ŒåŠ å¤§Dä¸ºå¥½å‹ è·å–ã€Šå…¨æ¸¯Top50å›½é™…å­¦æ ¡å¹´é¾„å¯¹ç…§è¡¨ã€‹</a>
        </div>
    </div>
</div>

<script>
    function calculateGrade() {
        const dobInput = document.getElementById('dob').value;
        const targetYear = parseInt(document.getElementById('targetYear').value);
        const schoolType = document.querySelector('input[name="schoolType"]:checked').value;
        
        if (!dobInput) { alert("è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ"); return; }
        
        const dob = new Date(dobInput);
        const birthYear = dob.getFullYear();
        const birthMonth = dob.getMonth() + 1; 
        
        let gradeText = "";
        let logicText = "";

        // è®¡ç®—ç›®æ ‡å¹´ä»½9æœˆæ—¶çš„å¹´é¾„
        // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦æ ¹æ®å­¦åˆ¶è®¡ç®—â€œå…¥å­¦å¹´é¾„é€»è¾‘â€

        if (schoolType === 'local') {
            // --- é€»è¾‘ Aï¼šè‡ªç„¶å¹´ (1.1 - 12.31) ---
            // é€‚ç”¨ï¼šæœ¬åœ°å­¦æ ¡, ESF(æ–°åˆ¶), CDNIS
            // è§„åˆ™ï¼šå…¥å­¦å¹´ä»½ - å‡ºç”Ÿå¹´ä»½ = 6 -> å°ä¸€/Year 1 (éƒ¨åˆ†Year 1å¯¹åº”5å²ï¼Œè¿™é‡Œå–é€šç”¨çš„æœ¬åœ°P1=6å²é€»è¾‘ï¼ŒESF Year1=5å²)
            
            let ageByYear = targetYear - birthYear;
            
            if (ageByYear === 3) gradeText = "K1 (å¹¼å„¿ç­)";
            else if (ageByYear === 4) gradeText = "K2 (ä½ç­)";
            else if (ageByYear === 5) gradeText = "K3 (é«˜ç­) / ESF Year 1"; // ESF Y1 is 5 turning 6
            else if (ageByYear === 6) gradeText = "P1 (å°ä¸€) / ESF Year 2";
            else if (ageByYear > 6) gradeText = `P${ageByYear - 5} (å°${ageByYear - 5})`;
            else gradeText = "PN (å­¦å‰ç­)";

            logicText = `ä¾æ®<strong>è‡ªç„¶å¹´</strong>è®¡ç®—ï¼ˆ1æœˆ1æ—¥-12æœˆ31æ—¥åˆ’çº¿ï¼‰ã€‚<br>é€‚ç”¨äºï¼šæ‰€æœ‰æœ¬åœ°å­¦æ ¡ã€è‹±åŸº(ESF)ã€åŠ æ‹¿å¤§å›½é™…ç­‰ã€‚`;
        } else {
            // --- é€»è¾‘ Bï¼šå­¦å¹´ (9.1 - 8.31) ---
            // é€‚ç”¨ï¼šHarrow, Kellett, è¿™é‡Œçš„é€»è¾‘é€šå¸¸ç¨å¾®è¶…å‰ä¸€ç‚¹
            // ä¸¾ä¾‹ï¼š2026å¹´9æœˆå…¥å­¦
            // å¦‚æœå­©å­æ˜¯ 2020å¹´8æœˆç”Ÿ (6å²åˆšæ»¡)ï¼Œå…¥è¯» Year 2
            // å¦‚æœå­©å­æ˜¯ 2020å¹´10æœˆç”Ÿ (5å²å°†æ»¡6)ï¼Œå…¥è¯» Year 1
            
            // ç®—æ³•ä¿®æ­£ï¼šçœ‹å­©å­åœ¨ TargetYear çš„ 8æœˆ31æ—¥ æ˜¯å¦å·²æ»¡ N å²
            // è‹±å›½å­¦åˆ¶ Year 1 é€šå¸¸æ¥çº³ 5å² (turning 6 within the school year)
            // å³ï¼šå‡ºç”Ÿåœ¨ (TargetYear - 6) çš„ 9.1 åˆ° (TargetYear - 5) çš„ 8.31
            
            // ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬å°†æ—¥æœŸæ ‡å‡†åŒ–ä¸ºæµ®ç‚¹æ•°å¹´ä»½æ¥æ¯”è¾ƒ
            // æ¯”å¦‚ 2020.09 (9æœˆ)
            
            // è®¡ç®—é€»è¾‘ï¼š
            // Year 1 å¯¹åº”å‡ºç”ŸåŒºé—´ï¼š[TargetYear-6].9.1 åˆ° [TargetYear-5].8.31
            // è®©æˆ‘ä»¬åæ¨ï¼š
            // å¦‚æœå…¥å­¦æ—¶(TargetYear.9)ï¼Œå­©å­å®è¶³å¹´é¾„æ»¡5å‘¨å²ä½†ä¸è¶³6å‘¨å² -> Year 1
            
            // è®¡ç®—å…¥å­¦å½“å¹´çš„8æœˆ31æ—¥æ—¶çš„å¹´é¾„
            let ageYears = targetYear - birthYear;
            if (birthMonth > 8) {
                ageYears -= 1; // è¿˜æ²¡è¿‡ç”Ÿæ—¥ï¼Œç®—å°ä¸€å²
            }

            // è‹±å›½åˆ¶ï¼š5å²è¯»Y1ï¼Œ6å²è¯»Y2
            if (ageYears === 2) gradeText = "Nursery";
            else if (ageYears === 3) gradeText = "Reception (ç±»ä¼¼K2)";
            else if (ageYears === 4) gradeText = "Year 1 (éƒ¨åˆ†å­¦æ ¡/5å²)"; 
            else if (ageYears === 5) gradeText = "Year 1 (ä¸»æµè‹±åˆ¶) / Year 2"; 
            // ä¿®æ­£ï¼šHarrowç­‰ä¸¥æ ¼è‹±åˆ¶ï¼Œ5å²è¯»Year 1ã€‚
            // 2020.9 - 2021.8 å‡ºç”Ÿ -> 2026.9 å…¥è¯» Year 1 (å…¥å­¦æ—¶5å²)
            
            // é‡æ–°æ ¡å‡†é€»è¾‘ B (Strict UK):
            // Cutoff is Aug 31.
            // Born Sep 2020 - Aug 2021 -> Sept 2026 Entry is Year 1.
            
            let cohortYear = birthYear;
            if (birthMonth >= 9) cohortYear += 1; // 9-12æœˆå‡ºç”Ÿçš„å­©å­å±äºä¸‹ä¸€å¹´çº§ç»„
            
            let ukAge = targetYear - cohortYear;
            
            if (ukAge === 5) gradeText = "Year 1";
            else if (ukAge === 6) gradeText = "Year 2";
            else if (ukAge === 4) gradeText = "Reception";
            else if (ukAge === 3) gradeText = "Nursery";
            else if (ukAge > 6) gradeText = `Year ${ukAge - 4}`;
            else gradeText = "å¹´é¾„åå°";

            logicText = `ä¾æ®<strong>å­¦æœ¯å¹´</strong>è®¡ç®—ï¼ˆ9æœˆ1æ—¥-8æœˆ31æ—¥åˆ’çº¿ï¼‰ã€‚<br>æ³¨æ„ï¼š9æœˆ-12æœˆå‡ºç”Ÿçš„â€œç»†Bâ€é€šå¸¸ä¼šè¯»ä½ä¸€çº§ã€‚<br>é€‚ç”¨äºï¼šå“ˆç½—ã€Kellettç­‰ä¼ ç»Ÿè‹±å¼ç§æ ¡ã€‚`;
        }

        // --- æ¸²æŸ“ç»“æœ ---
        document.getElementById('result').style.display = "block";
        document.getElementById('gradeDisplay').innerText = gradeText;
        document.getElementById('explanation').innerHTML = logicText;
    }
</script>

</body>
</html>
